<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Plaza finder</title>
    <link rel="icon" href="./favicon.ico" type="image/x-icon" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/maplibre-gl/dist/maplibre-gl.css"
    />
    <link
      href="https://unpkg.com/@stadiamaps/maplibre-search-box/dist/style.css"
      rel="stylesheet"
    />
    <link
      href="https://viglino.github.io/font-gis/css/font-gis.css"
      rel="stylesheet"
    />
  </head>
  <style>
    #legend-button {
      position: absolute;
      bottom: 60px;
      left: 10px;
      padding: 5px;
      background: white;
      border-radius: 5px;
      border: 1px solid grey;
      z-index: 2;
      box-shadow: #00000038 1px 1px 1px 1px;
      cursor: pointer;
    }
    #legend-button:hover {
      background-color: lightgrey;
    }
    #legend {
      z-index: 1;
      padding: 5px;
      border: 1px solid #767676;
      border-radius: 5px;
      -webkit-tap-highlight-color: rgb(210 84 84 / 0%);
      font-family: Helvetica Neue, Arial, Helvetica, sans-serif;
      font-size: 13px;
      position: absolute;
      bottom: 98px;
      left: 10px;
      overflow: hidden;
      background: white;
      height: 200px;
      width: 200px;
    }
    .legend-item {
      display: flex;
    }
    .legend-item-label {
      align-self: center;
      padding-left: 10px;
    }
    #legend-close{
      position: absolute;
      top: 0px;
      right: 0px;
      width: 20px;
      height: 20px;
      text-align: center;
      cursor:pointer;
      font-size:16px;
    }
    #legend-close:hover{
      font-weight: bold;
    }
  </style>
  <body style="margin: 0px">
    <main>
      <div id="map" style="height: 100vh; width: 100%">      
        <div id="legend-button" title="Toggle legend">
          <span class="fg-map-legend fg-2x"></span>
        </div>
      </div>
      <div id="legend">
        <div id="legend-close">
          x
        </div>
        <div class="legend-item">
          <div class="legend-item-shape">
            <svg display="block" height="41px" width="30px" viewBox="0 0 27 41">
              <g fill-rule="nonzero">
                <g transform="translate(3.0, 29.0)" fill="#000000">
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="10.5"
                    ry="5.25002273"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="10.5"
                    ry="5.25002273"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="9.5"
                    ry="4.77275007"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="8.5"
                    ry="4.29549936"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="7.5"
                    ry="3.81822308"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="6.5"
                    ry="3.34094679"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="5.5"
                    ry="2.86367051"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="4.5"
                    ry="2.38636864"
                  ></ellipse>
                </g>
                <g fill="#277FCA">
                  <path
                    d="M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"
                  ></path>
                </g>
                <g opacity="0.25" fill="#000000">
                  <path
                    d="M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"
                  ></path>
                </g>
                <g transform="translate(6.0, 7.0)" fill="#FFFFFF"></g>
                <g transform="translate(8.0, 8.0)">
                  <circle
                    fill="#000000"
                    opacity="0.25"
                    cx="5.5"
                    cy="5.5"
                    r="5.4999962"
                  ></circle>
                  <circle
                    fill="#FFFFFF"
                    cx="5.5"
                    cy="5.5"
                    r="5.4999962"
                  ></circle>
                </g>
              </g>
            </svg>
          </div>
          <div class="legend-item-label">Primera Instancia e Instrucción</div>
        </div>

        <div class="legend-item">
          <div class="legend-item-shape">
            <svg display="block" height="41px" width="30px" viewBox="0 0 27 41">
              <g fill-rule="nonzero">
                <g transform="translate(3.0, 29.0)" fill="#000000">
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="10.5"
                    ry="5.25002273"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="10.5"
                    ry="5.25002273"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="9.5"
                    ry="4.77275007"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="8.5"
                    ry="4.29549936"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="7.5"
                    ry="3.81822308"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="6.5"
                    ry="3.34094679"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="5.5"
                    ry="2.86367051"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="4.5"
                    ry="2.38636864"
                  ></ellipse>
                </g>
                <g fill="red">
                  <path
                    d="M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"
                  ></path>
                </g>
                <g opacity="0.25" fill="#000000">
                  <path
                    d="M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"
                  ></path>
                </g>
                <g transform="translate(6.0, 7.0)" fill="#FFFFFF"></g>
                <g transform="translate(8.0, 8.0)">
                  <circle
                    fill="#000000"
                    opacity="0.25"
                    cx="5.5"
                    cy="5.5"
                    r="5.4999962"
                  ></circle>
                  <circle
                    fill="#FFFFFF"
                    cx="5.5"
                    cy="5.5"
                    r="5.4999962"
                  ></circle>
                </g>
              </g>
            </svg>
          </div>
          <div class="legend-item-label">Con competencia en violencia de género</div>
        </div>

        <div class="legend-item">
          <div class="legend-item-shape">
            <svg display="block" height="41px" width="30px" viewBox="0 0 27 41">
              <g fill-rule="nonzero">
                <g transform="translate(3.0, 29.0)" fill="#000000">
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="10.5"
                    ry="5.25002273"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="10.5"
                    ry="5.25002273"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="9.5"
                    ry="4.77275007"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="8.5"
                    ry="4.29549936"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="7.5"
                    ry="3.81822308"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="6.5"
                    ry="3.34094679"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="5.5"
                    ry="2.86367051"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="4.5"
                    ry="2.38636864"
                  ></ellipse>
                </g>
                <g fill="#ff7f00">
                  <path
                    d="M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"
                  ></path>
                </g>
                <g opacity="0.25" fill="#000000">
                  <path
                    d="M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"
                  ></path>
                </g>
                <g transform="translate(6.0, 7.0)" fill="#FFFFFF"></g>
                <g transform="translate(8.0, 8.0)">
                  <circle
                    fill="#000000"
                    opacity="0.25"
                    cx="5.5"
                    cy="5.5"
                    r="5.4999962"
                  ></circle>
                  <circle
                    fill="#FFFFFF"
                    cx="5.5"
                    cy="5.5"
                    r="5.4999962"
                  ></circle>
                </g>
              </g>
            </svg>
          </div>
          <div class="legend-item-label">Tribunal Superior de Justicia</div>
        </div>

        <div class="legend-item">
          <div class="legend-item-shape">
            <svg display="block" height="41px" width="30px" viewBox="0 0 27 41">
              <g fill-rule="nonzero">
                <g transform="translate(3.0, 29.0)" fill="#000000">
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="10.5"
                    ry="5.25002273"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="10.5"
                    ry="5.25002273"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="9.5"
                    ry="4.77275007"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="8.5"
                    ry="4.29549936"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="7.5"
                    ry="3.81822308"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="6.5"
                    ry="3.34094679"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="5.5"
                    ry="2.86367051"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="4.5"
                    ry="2.38636864"
                  ></ellipse>
                </g>
                <g fill="#58CF39">
                  <path
                    d="M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"
                  ></path>
                </g>
                <g opacity="0.25" fill="#000000">
                  <path
                    d="M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"
                  ></path>
                </g>
                <g transform="translate(6.0, 7.0)" fill="#FFFFFF"></g>
                <g transform="translate(8.0, 8.0)">
                  <circle
                    fill="#000000"
                    opacity="0.25"
                    cx="5.5"
                    cy="5.5"
                    r="5.4999962"
                  ></circle>
                  <circle
                    fill="#FFFFFF"
                    cx="5.5"
                    cy="5.5"
                    r="5.4999962"
                  ></circle>
                </g>
              </g>
            </svg>
          </div>
          <div class="legend-item-label">Penal</div>
        </div>

        <div class="legend-item">
          <div class="legend-item-shape">
            <svg display="block" height="41px" width="30px" viewBox="0 0 27 41">
              <g fill-rule="nonzero">
                <g transform="translate(3.0, 29.0)" fill="#000000">
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="10.5"
                    ry="5.25002273"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="10.5"
                    ry="5.25002273"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="9.5"
                    ry="4.77275007"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="8.5"
                    ry="4.29549936"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="7.5"
                    ry="3.81822308"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="6.5"
                    ry="3.34094679"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="5.5"
                    ry="2.86367051"
                  ></ellipse>
                  <ellipse
                    opacity="0.04"
                    cx="10.5"
                    cy="5.80029008"
                    rx="4.5"
                    ry="2.38636864"
                  ></ellipse>
                </g>
                <g fill="#984ea3">
                  <path
                    d="M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"
                  ></path>
                </g>
                <g opacity="0.25" fill="#000000">
                  <path
                    d="M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"
                  ></path>
                </g>
                <g transform="translate(6.0, 7.0)" fill="#FFFFFF"></g>
                <g transform="translate(8.0, 8.0)">
                  <circle
                    fill="#000000"
                    opacity="0.25"
                    cx="5.5"
                    cy="5.5"
                    r="5.4999962"
                  ></circle>
                  <circle
                    fill="#FFFFFF"
                    cx="5.5"
                    cy="5.5"
                    r="5.4999962"
                  ></circle>
                </g>
              </g>
            </svg>
          </div>
          <div class="legend-item-label">Mercantil</div>
        </div>
      </div></div>

    </main>

    <script src="https://unpkg.com/maplibre-gl/dist/maplibre-gl.js"></script>
    <script src="https://unpkg.com/@stadiamaps/maplibre-search-box/dist/maplibre-search-box.umd.js"></script>

    <script>
      const getColor = function (obj) {
        if (obj.name.includes("violencia")) return "red";
        if (obj.name.includes("Penal")) return "#58CF39";
        if (obj.name.includes("Mercantil")) return "#984ea3";
        if (obj.name.includes("Tribunal Superior de Justicia"))
          return "#ff7f00";
        return "#277FCA";
      };

      let myData = [
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Aracena, con competencia en materia de violencia sobre la mujer",
          town: "Aracena",
          coords: [37.89238436427675, -6.5640480590032935],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Arcos de la Frontera, con competencia en materia de violencia sobre la mujer",
          town: "Arcos de la Frontera",
          coords: [36.75703633040058, -5.8136587646104045],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 6 de Ayamonte",
          town: "Ayamonte",
          coords: [37.20784502194531, -7.403776024095165],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Barbate, con funciones compartidas de registro civil",
          town: "Barbate",
          coords: [36.18772034771597, -5.924349473192595],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Berja, con competencia enmateria de violencia sobre la mujer",
          town: "Berja",
          coords: [36.84505573911067, -2.948412126057],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de Chiclana de la Frontera, concompetencia en materia de violencia sobre la mujer",
          coords: [36.41815940670332, -6.151793326161993],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 6 de Chiclana de la Frontera",
          coords: [36.41815940670332, -6.152],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Coria del Río, con funciones compartidas de registro civil",
          coords: [37.27918, -6.05713895],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Coria del Rio, con competencia en materia de violencia sobre la mujer",
          coords: [37.27916, -6.057138959],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Écija, con competencia enmateria de violencia sobre la mujer",
          coords: [37.54110364203184, -5.082449317032444],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Écija, con funcionescompartidas de registro civil",
          coords: [37.54099305110431, -5.082502965281586],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Huércal-Overa, concompetencia en materia de violencia sobre la mujer",
          coords: [37.395927941681066, -1.93881],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Huércal-Overa, con funcionescompartidas de registro civil",
          coords: [37.39592795, -1.93885],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Huércal-Overa",
          coords: [37.39592796, -1.93889],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Huéscar, con competencia enmateria de violencia sobre la mujer y funciones compartidas de registro civil",
          coords: [37.803387231093225, -2.5306560749363887],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Lucena, con funcionescompartidas de registro civil",
          coords: [37.412530568442, -4.493619238900143],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Lora del Río, con funcionescompartidas de registro civil",
          coords: [37.655435051682865, -5.5260596070600485],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Marchena, con funciones compartidas de registro civil",
          coords: [37.3270361738023, -5.416176339586823],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Martos, con competencia en materia de violencia sobre la mujer",
          coords: [37.718262135768654, -3.96891],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Martos, con funciones compartidas de registro civil",
          coords: [37.718262135768654, -3.96899],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Puerto Real, con competencia en materia de violencia sobre la mujer",
          coords: [36.53112678156062, -6.183218878000991],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de San Roque",
          coords: [36.210457202510575, -5.384894198612685],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Ubrique, con competencia en materia de violencia sobre la mujer y funciones compartidas de registro civil",
          coords: [36.677253224580774, -5.445123781213892],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Úbeda",
          coords: [38.01118974046687, -3.371814213110574],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Utrera, con competencia en materia de violencia sobre la mujer",
          coords: [37.18513744011641, -5.78034943607205],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Utrera, con funciones compartidas de registro civil",
          coords: [37.18513744011641, -5.78034943607205],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Alcañiz, con funciones compartidas de registro civil",
          coords: [41.054313066497976, -0.1301193191868207],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Tarazona, con competencia en materia de violencia sobre la mujer y funciones compartidas de registro civil",
          coords: [41.90444603147892, -1.7253918430458828],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Castropol, con competencia en materia de violencia sobre la mujer y funciones compartidas de registro civil",
          coords: [43.52503402739142, -7.028047362704618],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Lena, con funciones compartidas de registro civil",
          coords: [43.0873122384277, -5.835476443824208],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Ciutadella de Menorca, con funciones compartidas de registro civil",
          coords: [39.99917446141802, 3.840903613923919],
        },
        {
          name: "Juzgado de Primera Instancia número 2 de Eivissa",
          coords: [38.90638177841414, 1.4196907435241557],
        },
        {
          name: "Juzgado de Instrucción número 1 de Inca",
          coords: [39.71775575906902, 2.9083934754508314],
        },
        {
          name: "Juzgado de Instrucción número 2 de Inca, con competencia en materia de violencia sobre la mujer",
          coords: [39.71775575906902, 2.9083934754508314],
        },
        {
          name: "Juzgado de Instrucción número 1 de Manacor",
          coords: [39.56974583062239, 3.20998679475817],
        },
        {
          name: "Juzgado de Primera Instancia número 17 de Palma, mientras su titular doña Tomasa Hernández Martín se encuentre en la situación administrativa de servicios especiales en la Carrera Judicial",
          coords: [39.57798859960964, 2.648195306421741],
        },
        {
          name: "Juzgado de lo Mercantil número 1 de Palma",
          coords: [39.57050604894888, 2.656012991953557],
        },
        {
          name: "Juzgado de lo Mercantil número 4 de Palma",
          coords: [39.57050604894888, 2.656112991953557],
        },

        {
          name: "Juzgado de Instrucción número 2 de Arona",
          coords: [28.099685348128723, -16.679887253049525],
        },
        {
          name: "Juzgado de Primera Instancia número 3 de Arrecife, con funciones compartidas de registro civil",
          coords: [28.964317744524706, -13.55314650892786],
        },
        {
          name: "Juzgado de Instrucción número 1 de Arrecife, con competencia en materia de violencia sobre la mujer",
          coords: [28.964317744524706, -13.55314650892786],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de Granadilla de Abona",
          coords: [28.170879675706537, -16.54210540852984],
        },
        {
          name: "Juez/a de adscripción territorial del Tribunal Superior de Justicia de Canarias, provincia de Santa Cruz de Tenerife",
          coords: [28.4637799554525, -16.24821277137661],
        },
        {
          name: "Jueza de adscripción territorial del Tribunal Superior de Justicia de Canarias, provincia de Santa Cruz de Tenerife",
          coords: [28.4637799554525, -16.24823277137661],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Castro-Urdiales, con funciones compartidas de registro civil",
          coords: [43.36606457197385, -3.2236287898442773],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Castro-Urdiales, con competencia en materia de violencia sobre la mujer",
          coords: [43.36606457197385, -3.2237287898442773],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Santoña, con competencia en materia de violencia sobre la mujer y funciones compartidas de registro civil",
          coords: [43.44489960779738, -3.4556432223524243],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Aranda de Duero, con competencia en materia de violencia sobre la mujer",
          coords: [41.66910103065499, -3.6892550065462704],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Arenas de San Pedro, con funciones compartidas de registro civil",
          coords: [40.21019005588732, -5.087493225248408],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Miranda de Ebro, con funciones compartidas de registro civil",
          coords: [42.68710359073476, -2.943386734440822],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Medina del Campo, con competencia en materia de violencia sobre la mujer",
          coords: [41.30835062891667, -4.9152877640254475],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de Segovia, con competencia en materia de violencia sobre la mujer",
          coords: [40.94227171986563, -4.108939503105534],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Cuenca, con funciones compartidas de registro civil",
          coords: [40.06996729446517, -2.1363449906123755],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de La Roda, con competencia en materia de violencia sobre la mujer",
          coords: [39.20639385432869, -2.1537634937856596],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Ocaña, con competencia en materia de violencia sobre la mujer",
          coords: [39.958115245012436, -3.50008147671511],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Ocaña, con funciones compartidas de registro civil",
          coords: [39.958115245012436, -3.50018147671511],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Puertollano, con competencia en materia de violencia sobre la mujer",
          coords: [38.688938474244985, -4.105727101003735],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Puertollano, con funciones compartidas de registro civil",
          coords: [38.688938474244985, -4.105727101003735],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Talavera de la Reina",
          coords: [39.96260854626804, -4.828124492362252],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Talavera de la Reina, con funciones compartidas de registro civil",
          coords: [39.96260854626804, -4.828524492362252],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Tomelloso",
          coords: [39.157006225862105, -3.0194105419890507],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Torrijos, con funciones compartidas de registro civil",
          coords: [39.983178562394826, -4.2818115235227285],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Villarrobledo, con competencia en materia de violencia sobre la mujer y funciones compartidas de registro civil",
          coords: [39.26861377941576, -2.602027203738526],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Villarrobledo",
          coords: [39.26861377941576, -2.602127203738526],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Amposta, con competencia en materia de violencia sobre la mujer",
          coords: [40.70681230326108, 0.5806820618612605],
        },
        {
          name: "Juzgado de lo Penal número 1 de Arenys de Mar",
          coords: [41.580251124379394, 2.553222517835868],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Blanes",
          coords: [41.67553731285113, 2.790432185904015],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Blanes",
          coords: [41.67553731285113, 2.791432185904015],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Cornellà de Llobregat",
          coords: [41.35409975628237, 2.0754600599554753],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Cornellá de Llobregat",
          coords: [41.35409975628237, 2.0751600599554753],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Cornellá de Llobregat",
          coords: [41.35409975628237, 2.0752600599554753],
        },
        {
          name: "Juzgado de Primera Instancia de Instrucción número 4 de Cornellá de Llobregat, con competencia en materia de violencia sobre la mujer",
          coords: [41.35409975628237, 2.0753600599554753],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 5 de Cornellá de Llobregat",
          coords: [41.35409975628237, 2.0754600599554753],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de El Prat de Llobregat",
          coords: [41.315898314482034, 2.085438955687473],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de El Prat de Llobregat",
          coords: [41.315898314482034, 2.085838955687473],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 6 de El Vendrell",
          coords: [41.219713553364606, 1.5349209235161652],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Esplugues de Llobregat",
          coords: [41.37677545567743, 2.085510482413712],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Figueres",
          coords: [42.26234679404698, 2.95033755224138],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de Figueres",
          coords: [42.26234679404698, 2.95063755224138],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 8 de Gavá",
          coords: [41.3025788569883, 2.005456827930615],
        },
        {
          name: "Juzgado de lo Mercantil número 1 de Girona",
          coords: [41.98664916604988, 2.822028388240341],
        },
        {
          name: "Juzgado de lo Penal número 3 de Girona",
          coords: [41.98664916604988, 2.822328388240341],
        },
        {
          name: "Juzgado de Primera Instancia número 7 de Granollers",
          coords: [41.606567296643014, 2.288194298937398],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de La Bisbal d’Empordá, con competencia en materia de violencia sobre la mujer",
          coords: [41.95874342321111, 3.0395993121782943],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Manresa",
          coords: [41.7284317449979, 1.8213462212923421],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 5 de Martorell, con competencia en materia de violencia sobre la mujer",
          coords: [41.47759611718314, 1.9220545445207266],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 7 de Martorell",
          coords: [41.47759611718314, 1.9228545445207266],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Mollet del Vallés",
          coords: [41.53566391497541, 2.2180250037332014],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Mollet del Vallés",
          coords: [41.53566391497541, 2.2181250037332014],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de Mollet del Vallés, con competencia en materia de violencia sobre la mujer",
          coords: [41.53566391497541, 2.2182250037332014],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 5 de Mollet del Vallés",
          coords: [41.53566391497541, 2.2183250037332014],
        },
        {
          name: "Juzgado de lo Penal número 1 de Reus",
          coords: [41.16104258570876, 1.1155583277078082],
        },
        {
          name: "Juzgado de Primera Instancia número 6 de Reus",
          coords: [41.16104258570876, 1.1159583277078082],
        },
        {
          name: "Juzgado de Primera Instancia número 9 de Sabadell, de familia, capacidad de las personas e internamientos",
          coords: [41.552652012768284, 2.098708862932134],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 5 de Sant Boi de Llobregat",
          coords: [41.34357270564254, 2.0381490456717786],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Sant Feliu de Llobregat",
          coords: [41.382982078420135, 2.0460929820985427],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de Sant Feliu de Llobregat, con funciones compartidas de registro civil",
          coords: [41.382982078420135, 2.0463929820985427],
        },
        {
          name: "Juzgado de lo Penal número 2 de Tarragona",
          coords: [41.118131555155, 1.2380584393536467],
        },
        {
          name: "Juzgado de lo Penal número 4 de Tarragona",
          coords: [41.118131555155, 1.2383584393536467],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de Tortosa, con competencia en materia de violencia sobre la mujer",
          coords: [40.81239263765183, 0.5224786687720764],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Valls, con competencia en materia de violencia sobre la mujer",
          coords: [41.285358674681554, 1.249417779614937],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Vielha e Mijarán, con competencia en materia de violencia sobre la mujer y funciones compartidas de registro civil",
          coords: [42.7039751194872, 0.7899959814517463],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 6 de Vilanova y la Geltrú, con competencia en materia de violencia sobre la mujer",
          coords: [41.22693622031439, 1.7165024094940062],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Vic",
          coords: [41.928543189950766, 2.251287666661574],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Vic, con funciones compartidas de registro civil",
          coords: [41.928543189950766, 2.251387666661574],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 5 de Vic",
          coords: [41.928543189950766, 2.251487666661574],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 6 de Vic",
          coords: [41.928543189950766, 2.251587666661574],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Vilafranca del Penedés, con competencia en materia de violencia sobre la mujer",
          coords: [41.34285163656188, 1.6997731801453446],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Alcoy, con funciones compartidas de registro civil",
          coords: [38.69855831316559, -0.47875900863946985],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de Alzira",
          coords: [39.151514984370145, -0.43307450130450414],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de Elda, con competencia en materia de violencia sobre la mujer",
          coords: [38.476390472066555, -0.7973947761955424],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Novelda",
          coords: [38.38381127858005, -0.766773428604855],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Requena, con competencia en materia de violencia sobre la mujer",
          coords: [39.49108818230778, -1.0868821379202023],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de San Vicente del Raspeig",
          coords: [38.39554415779393, -0.5259487072137363],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Villajoyosa",
          coords: [38.507442656170745, -0.2283880371932957],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Villajoyosa",
          coords: [38.507442656170745, -0.2283880371932957],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Villena, con competencia en materia de violencia sobre la mujer",
          coords: [38.631888024492085, -0.862435455653465],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de Vinaròs, con competencia en materia de violencia sobre la mujer",
          coords: [40.4675683829941, 0.47157259896886267],
        },
        {
          name: "Juez/a de adscripción territorial del Tribunal Superior de Justicia de la Comunidad Valenciana, provincia de Alicante",
          coords: [39.472306332954574, -0.3696514794800818],
        },

        {
          name: "Juzgado de Violencia sobre la Mujer número 1 de Badajoz",
          coords: [38.87904239237664, -6.971198227882043],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Don Benito",
          coords: [38.954029754574435, -5.85917100749658],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Olivenza, con competencia en materia de violencia sobre la mujer",
          coords: [38.68257214203571, -7.101636183159357],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Valencia de Alcántara, con funciones compartidas de registro civil",
          coords: [39.41288330268256, -7.241873593511243],
        },

        {
          name: "Juzgado de Primera Instancia Instrucción número 2 de A Estrada",
          coords: [42.68793916894996, -8.493097952869615],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Carballo, con competencia en materia de violencia sobre la mujer",
          coords: [43.207776989390595, -8.693352451325045],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Carballo",
          coords: [43.207776989390595, -8.693652451325045],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Cangas de Morrazo, con competencia en materia de violencia sobre la mujer",
          coords: [42.266145109211344, -8.784335163426366],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Corcubión, con competencia en materia de violencia sobre la mujer",
          coords: [42.94365173686488, -9.190329184916455],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Corcubión, con funciones compartidas de registro civil",
          coords: [42.94365173686488, -9.190029184916455],
        },
        {
          name: "Juzgado de Primera instancia e Instrucción número 2 de Lalín, con funciones compartidas de registro civil",
          coords: [42.65870383927705, -8.1120356988141],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Muros, con competencia en materia de violencia sobre la mujer y funciones compartidas de registro civil",
          coords: [42.77447133012015, -9.057333633882329],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Muros, con competencia en materia de violencia sobre la mujer y funciones compartidas de registro civil",
          coords: [42.77447133012015, -9.057033633882329],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Ponteareas",
          coords: [42.17544312246724, -8.50525603006323],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Sarria, con competencia en materia de violencia sobre la mujer y funciones compartidas de registro civil",
          coords: [42.781646943006564, -7.410220485461575],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Verín, con competencia en materia de violencia sobre la mujer",
          coords: [41.93806668979591, -7.4353119048039565],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Verín, con funciones compartidas de registro civil",
          coords: [41.93806668979591, -7.4350119048039565],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Viveiro, con funciones compartidas de registro civil",
          coords: [43.66430009561031, -7.593722650134181],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Xinzo de Limia, con competencia en materia de violencia sobre la mujer y funciones compartidas de registro civil",
          coords: [42.063061248089994, -7.725941529557883],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Calahorra, con competencia en materia de violencia sobre la mujer",
          coords: [42.306945205302796, -1.9649479204881157],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Valdemoro, con competencia en materia de violencia sobre la mujer",
          coords: [40.19088498310573, -3.668161056346371],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Cieza, con competencia en materia de violencia sobre la mujer",
          coords: [38.2422941162904, -1.421750377756776],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de Molina de Segura, con competencia en materia de violencia sobre la mujer",
          coords: [38.052651667586794, -1.2073634873916663],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Totana",
          coords: [37.76942265954081, -1.4954758953667044],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Totana, con competencia en materia de violencia sobre la mujer",
          coords: [37.76942265954081, -1.4955758953667044],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de Totana",
          coords: [37.76942265954081, -1.4956758953667044],
        },

        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Amurrio",
          coords: [43.05178628839735, -3.0009164814098104],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 2 de Eibar, con competencia en materia de violencia sobre la mujer",
          coords: [43.183321077638716, -2.4716619717419297],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Getxo",
          coords: [43.34427938252831, -3.0050571348279275],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 4 de Getxo",
          coords: [43.34427938252831, -3.0053571348279275],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Gernika-Lumo, con competencia en materia de violencia sobre la mujer",
          coords: [43.31133146624726, -2.680100969703887],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 1 de Tolosa, con competencia en materia de violencia sobre la mujer",
          coords: [43.13697363419664, -2.075378762317771],
        },
        {
          name: "Juzgado de Primera Instancia e Instrucción número 3 de Tolosa",
          coords: [43.13697363419664, -2.075678762317771],
        },
      ];

      let container = document.getElementById("map");
      const map = new maplibregl.Map({
        container,
        center: [-3, 35],
        zoom: 4,
        style: "https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",
        scrollZoom: true,
      });
      // fullscreen toggle
      map.addControl(new maplibregl.FullscreenControl());
      // geocoder
      map.addControl(
        new maplibreSearchBox.MapLibreSearchControl({
          useMapFocusPoint: true,
          onResultSelected: (feature) => {
            // You can add code here to take some action when a result is selected.
            console.log(feature.geometry.coordinates);
          },
          // You can also use our EU endpoint to keep traffic within the EU using the basePath option:
          baseUrl: "https://api-eu.stadiamaps.com",
        }),
        "top-left"
      );

      myData.forEach((obj) => {
        let marker = new maplibregl.Marker({
          color: getColor(obj),
        })
          .setLngLat([obj.coords[1], obj.coords[0]])
          .setPopup(
            new maplibregl.Popup({ closeButton: true }).setHTML(
              `<span>${obj.name}</span>`
            )
          )
          .addTo(map);
      });

      //ontoggle legend
      let btn = document.getElementById('legend-button')
      let legendCloseBtn = document.getElementById('legend-close')
      let legend = document.getElementById('legend')
      let legendIsOpen = true
      btn.addEventListener('click',function(e){
        legendIsOpen = !legendIsOpen

        if (!legendIsOpen) {
          // close
          legend.style.display = 'none'
        } else {
          // open
          legend.style.display = 'block'
        }
      })
      legendCloseBtn.addEventListener('click',function(e){
        legendIsOpen = !legendIsOpen

        if (!legendIsOpen) {
          // close
          legend.style.display = 'none'
        } else {
          // open
          legend.style.display = 'block'
        }
      })
    </script>
  </body>
</html>
